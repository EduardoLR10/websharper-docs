# Sitelets Inferred URL Cheat Sheet

Here is a quick reference for the requests parsed by the `Sitelet.Infer` family of functions, and the URLs generated by the corresponding `Context.Link`.

<style>.ref-table{width:100%;table-layout:fixed}.ref-table th{text-align:center}.ref-table td{vertical-align:top}</style>
<table class="ref-table">
<colgroup>
<col span="1" style="width:50%" />
<col span="1" style="width:50%" />
</colgroup>
<tr><td colspan="2">
## Base types
</td></tr>
<tr><th>Action type</th><th>Action value and corresponding request</th></tr>
<tr><td>

```fsharp
type Action = string
```
</td><td>

```fsharp
"home"

// GET /home

"home/testé"

// GET /home~2ftest~e9
```
</td></tr>
<tr><td>

```fsharp
type Action = int
```
</td><td>

```
2

// GET /2
```
</td></tr>
<tr><td>

```fsharp
type Action = float
```
</td><td>

```fsharp
1.2345

// GET /1.2345
```
</td></tr>
<tr><td colspan="2">

And every standard .NET number type: `int8`, `uint8`, `int16`, `uint16`, `int32`, `uint32`, `int64`, `uint64`, `single`, `double`, `decimal`.

</td></tr>
<tr><td colspan="2">
## Records

Encoded as successive path fragments.

</td></tr>
<tr><th>Action type</th><th>Action value and corresponding request</th></tr>
<tr><td>

```fsharp
type Action =
  { x: string
    y: int }
```
</td><td>

```fsharp
{ x = "test"; y = 1 }

// GET /test/1
```
</td></tr>
<tr><td>

```fsharp
type Action =
  { x: string
    y: Sub }
and Sub =
  { z: int
    t: int }
```
</td><td>

```fsharp
{ x = "test"
  y = { z = 1; t = 2 } }

// GET /test/1/2
```
</td></tr>
<tr><td colspan="2">
## Unions

Encoded as an identifying path fragment, followed by the arguments.

</td></tr>
<tr><th>Action type</th><th>Action value and corresponding request</th></tr>
<tr><td>

```fsharp
type Action =
  | Home
  | Article of id: int * slug: string
```
</td><td>

```fsharp
Home

// GET /Home

Article(1, "my-article")

// GET /Article/1/my-article
```
</td></tr>
<tr><td colspan="2">

Choosing the identifying path fragment with `[<EndPoint(fragment)>]`.

</td></tr>
<tr><td>

```fsharp
type Action =
  | [<EndPoint "/">] Home
  | [<EndPoint "/article">]
    Article of id: int * slug: string
```
</td><td>

```fsharp
Home

// GET /

Article(1, "my-article")

// GET /article/1/my-article
```
</td></tr>
<tr><td colspan="2">

When parsing, if several cases have the same `[<EndPoint(fragment)>]`, they are tried in the order in which they are declared:

</td></tr>
<tr><td>

```fsharp
type Action =
  | [<EndPoint "/blog">] AllArticles
  | [<EndPoint "/blog">] ArticleById of id: int
  | [<EndPoint "/blog">] ArticleBySlug of slug: string
```
</td><td>

```fsharp
AllArticles

// GET /blog

ArticleById 123

// GET /blog/123

ArticleBySlug "my-article"

// GET /blog/my-article
```
</td></tr>
<tr><td colspan="2">
## Datetime

Default format is `"yyyy-MM-dd-HH.mm.ss"`.

</td></tr>
<tr><td>

```fsharp
type Action = System.DateTime
```
</td><td>

```fsharp
System.DateTime.UtcNow

// GET /2015-04-15-15.37.23
```
</td></tr>
<tr><td colspan="2">

Setting the format of a DateTime union case argument with `[<DateTimeFormat(argname, format)>]`.

</td></tr>
<tr><td>

```fsharp
type Action =
  | [<DateTimeFormat("date", "yyyy-MM-dd")>]
    Article of id: int * date: DateTime
```
</td><td>

```fsharp
Article(43, System.DateTime.Now)

// GET /Article/43/2015-04-15
```
</td></tr>
<tr><td colspan="2">

Setting the format of a DateTime record field with `[<DateTimeFormat(format)>]`.

</td></tr>
<tr><td>

```fsharp
type Action =
  { id: int
    [<DateTimeFormat("yyyy-MM-dd")>]
    date: DateTime }
```
</td><td>

```fsharp
{ id = 43; date = System.DateTime.Now }

// GET /Article/43/2015-04-15
```
</td></tr>
<tr><td colspan="2">
## Wildcards

`[<Wildcard>]` on a union case encodes the remainder of the path in the last argument.

If the argument's type is `list<'T>` or `array<'T>`, then the path is parsed as a sequence of `'T`.

</td></tr>
<tr><th>Action type</th><th>Action value and corresponding request</th></tr>
<tr><td>

```fsharp
type Action =
  | [<Wildcard>] Articles of int * list<string>
  | [<Wildcard>] Articles2 of list<int * string>
```
</td><td>

```fsharp
Articles (12, ["abc"; "def"])

// GET /Articles/12/abc/def

Articles (34, [])

// GET /Articles/34

Articles2 [| (12, "abc"); (34, "def") |]

// GET /Articles2/12/abc/34/def
```
</td></tr>
<tr><td colspan="2">

If the argument's type is `string`, then the remainder of the path is passed.

</td></tr>
<tr><th>Action type</th><th>Action value and corresponding request</th></tr>
<tr><td>

```fsharp
type Action =
  | [<Wildcard>] Articles of int * string
```
</td><td>

```fsharp
Articles (12, "abc/def")

// GET /Articles/12/abc/def

Articles (34, "")

// GET /Articles/34
```
</td></tr>
<tr><td style="height:100%"></td></tr>
<tr><td colspan="2">
## Methods

Selected with `[<EndPoint(methodAndFragment)>]` or with `[<Method(name...)>]`.

</td></tr>
<tr><th>Action type</th><th>Action value and corresponding request</th></tr>
<tr><td>

```fsharp
type Action =
  | [<EndPoint "GET /api">]
    ApiGet of int
  | [<EndPoint "POST /api">]
    ApiPost of string
```
</td><td>

```fsharp
ApiGet 12

// GET /api/12

ApiPost "posted"

// POST /api/posted
```
</td></tr>
<tr><td>

```fsharp
type Action =
  | [<Method "GET"; EndPoint "/api">]
    ApiGet of int
  | [<Method "POST"; EndPoint "/api">]
    ApiPost of string
```
</td><td>

```fsharp
ApiGet 12

// GET /api/12

ApiPost "posted"

// POST /api/posted
```
</td></tr>
<tr><td style="height:100%"></td></tr>
<tr><td colspan="2">
## GET Query parameters

For union case arguments, indicated with `[<Query(argname...)>]`.

</td></tr>
<tr><th>Action type</th><th>Action value and corresponding request</th></tr>
<tr><td>

```fsharp
type Action =
  | [<Query("start", "count")>]
    Get of
      id: int *
      start: int *
      count: int option
```
</td><td>

```fsharp
Get(14, 3, Some 5)

// GET /Get/14?start=3&count=5

Get(14, 3, None)

// GET /Get/14?start=3
```
</td></tr>
<tr><td style="height:100%"></td></tr>
<tr><td>

For record fields, indicated with `[<Query>]`.

</td></tr>
<tr><td>

```fsharp
type Action =
  { [<Query>] x: int
    y: string }
```
</td><td>

```fsharp
{ x = 1; y = "test" }

// GET /test?x=1
```
</td></tr>
<tr><td style="height:100%"></td></tr>
<tr><td colspan="2">
## JSON body

See the [JSON cheat sheet](json-ref) for the JSON format.

For union case arguments, indicated with `[<Json(argname)>]`.

</td></tr>
<tr><th>Action type</th><th>Action value and corresponding request</th></tr>
<tr><td>

```fsharp
type Action =
  | [<Method "POST"; Json "body">]
    Article of id: int * body: Body

and Body =
  { x: int
    y: string }
```
</td><td>

```fsharp
Article(31,
  { x = 4
    y = "a" })

// POST /Article/31
//
// {"x":4,"y":"a"}
```
</td></tr>
<tr><td colspan="2">

For record fields, indicated with `[<Json>]`.

</td></tr>
<tr><td>

```fsharp
type Action =
  | [<Method "POST">]
    Article of ArticleArgs

and ArticleArgs =
  { id: int
    [<Json>] body: Body }

and Body =
  { x: int
    y: string }
```
</td><td>

```fsharp
Article(
  { id = 31
    body =
      { x = 4
        y = "a" } })

// POST /Article/31
//
// {"x":4,"y":"a"}
```
</td></tr>
<tr><td style="height:100%"></td></tr>
<tr><td colspan="2">
## Form body

Parses form data with content type `application/x-www-form-urlencoded` or `multipart/form-data`.

For union case arguments, indicated with `[<FormData(argname)>]`.

</td></tr>
<tr><th>Action type</th><th>Action value and corresponding request</th></tr>
<tr><td>

```fsharp
type Action =
  | [<Method "POST"; FormData("x", "y")>]
    Article of id: int * x: int * y: string
```
</td><td>

```fsharp
Article(31, 4, "a")

// POST /Article/31
// Content-Type: application/x-www-form-urlencoded
//
// x=4&y=a
//
//// (or:)
//
// POST /Article/31
// Content-Type: multipart/form-data
//
// ------WebKitFormBoundaryDcVW4TSGc9MaMCl0
// Content-Disposition: form-data; name="x"
//
// 4
// ------WebKitFormBoundaryDcVW4TSGc9MaMCl0
// Content-Disposition: form-data; name="y"
//
// a
// ------WebKitFormBoundaryDcVW4TSGc9MaMCl0--
```
</td></tr>
<tr><td colspan="2">

For record fields, indicated with `[<FormData>]`.

</td></tr>
<tr><td>

```fsharp
type Action =
  | [<Method "POST">]
    Article of ArticleArgs

and ArticleArgs =
  { [<FormData>] x: int
    [<FormData>] y: string }
```
</td><td>

```fsharp
Article(
  { x = 4
    y = "a" })

// POST /Article/31
// Content-Type: application/x-www-form-urlencoded
//
// x=4&y=a
//
//// (or:)
//
// POST /Article/31
// Content-Type: multipart/form-data
//
// ------WebKitFormBoundaryDcVW4TSGc9MaMCl0
// Content-Disposition: form-data; name="x"
//
// 4
// ------WebKitFormBoundaryDcVW4TSGc9MaMCl0
// Content-Disposition: form-data; name="y"
//
// a
// ------WebKitFormBoundaryDcVW4TSGc9MaMCl0--
```
</td></tr>
</table>
